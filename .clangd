# clangd configuration for DeepGEMM (CUDA, CuTe, CUTLASS)

CompileFlags:
  # Tell clangd where to find the compilation database generated by bear/compiledb
  CompilationDatabase: build/

  Add: [
    "-std=c++17",            # Force C++17 standard
    "-fPIC",
    
    # --- Project Include Paths ---
    "-I/usr/local/cuda/include",
    "-I/usr/local/cuda/include/cccl/libcudacxx/include", # CUDA C++ Core Libraries
    "-I./deep_gemm/include",
    "-I./third-party/cutlass/include",
    "-I./third-party/cutlass/include/cute",
    "-I./third-party/fmt/include",
    
    # --- CUDA Environment Simulation ---
    "-D__CUDACC__",          # Mark as CUDA compiler environment
    "-D__NVCC__",            # Identify as NVCC
    "-D__CUDA_ARCH__=900",   # Target Hopper Architecture (H100/H800) for TMA/Barrier features
    
    # --- Warning Suppression ---
    "-Wno-unknown-attributes",      # Suppress warnings for __global__, __device__, etc.
    "-Wno-deprecated-declarations", # Ignore deprecated API warnings
    "-Wno-psabi",                   # Suppress ABI-related warnings
    "-Wno-unused-parameter"
  ]

  # Optional: specify a compiler driver to help clangd find system headers
  # Compiler: /usr/bin/g++

Index:
  Background: Build        # Index project files in the background
  StandardLibrary: true    # Enable indexing of the C++ standard library

Diagnostics:
  Suppress: [
    "drv_unknown_argument", # Suppress warnings for compiler flags clangd doesn't recognize
    "unused-includes",      # Don't nag about unused headers
    "tmpl_mem_access"       # Suppress complex template errors often seen in CuTe
  ]
  UnusedIncludes: None      # Disable unused include detection to reduce noise

# Inlay hints are extremely helpful for CuTe's complex Layout types
InlayHints:
  Enabled: true             # Enable all inlay hints
  Designators: true         # Show designators in aggregate initialization
  ParameterNames: true      # Show parameter names in function calls
  DeducedTypes: true        # Show deduced types for 'auto' variables

Hover:
  ShowAKA: true             # Show underlying types for complex CuTe aliases/Layouts